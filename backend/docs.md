# SpendWise REST API Documentation

## Plaid API

### Get Plaid link_token

- URL: `GET /api/plaid/link_token?userId=${}`
  - content-type: `application/json`
  - Description: Get a link_token for a user to link their bank account to Plaid.
  - Request query parameters:
    - userId (string, required): ID of the user.
  - Response body: object
    - link_token (string): The link_token generated by the Plaid API.

### Exchange public_token for access_token

- URL: POST /api/plaid/token_exchange
  - content-type: `application/json`
  - Description: Exchange the public_token for an access_token and store it in the database.
  - Request body: object
    - public_token (string, required): The public_token returned by the Plaid API when the user links their account.
    - userId (string, required): ID of the user.
- Response body: string
  - Success message or error message.

### Synchronize transactions

- URL: `GET /api/plaid/transactions/sync?userId=${}`
  - content-type: `application/json`
  - Description: Synchronize transactions for a user from their linked bank account.
  - Request query parameters:
    - userId (string, required): ID of the user.
  - Response body: string
    - Success message or error message.

### Check if user has linked Plaid

- URL: `GET /api/plaid/has_linked_plaid?userId=${}`
  - content-type: `application/json`
  - Description: Check if a user has linked their bank account to Plaid.
  - Request query parameters:
    - userId (string, required): ID of the user.
  - Response body: string
    - Success message or error message.

## Accounts API

### Create a new account

- URL: `POST /api/accounts/`
  - content-type: `application/json`
  - Description: Create a new account for a user.
  - Request body: object
    - userId (string, required): ID of the user the account belongs to.
    - accountName (string, required): Name of the account to be created.
- Response: 201 Created
  - content-type: `application/json`
  - body: object
    - id: (number) the id of the account you just created
    - UserId: (number) the id of the user that the account belongs to
    - accountName: (string) the name of the account you just created
    - updatedAt: (date) the date and time of creation.
    - createdAt: (date) the date and time of update.
    - plaidAccountId (string) accountId related to Plaid. If null then not linked to Plaid
- Response: 400
  - body: Bad Request
  - Description: Possible required fields are missing.
- Response: 500
  - body: Internal Server Error
  - Description: Possible userId is incorrect.

```
$ curl -X POST
       -H "Content-Type: `application/json`"
       -d '{"userId":"1","accountName":"Account_A"}'
       http://localhost:3001/api/accounts/'
```

### Update an account

- URL: `PUT /api/accounts/:accountId`
  - content-type: `application/json`
  - Description: Updates an existing account.
  - Request parameters:
    - accountId (number, required): The ID of the account to be updated.
  - Request body: Object
    - userId (string, required): The ID of the user the account belongs to.
    - accountName (string, required): The new name for the account.
  - Response: 200 OK
    - Content-Type: `application/json`
    - Body: Object
      - id (number): The ID of the updated account.
      - userUserIdid (string): The ID of the user the account belongs to.
      - accountName (string): The new name for the account.
      - updatedAt: (date) the date and time of creation.
      - createdAt: (date) the date and time of update.
      - plaidAccountId (string) accountId related to Plaid. If null then not linked to Plaid
  - Response: 400
    - Body: Bad Request
    - Description: One or more required fields are missing from the request body.
  - Response: 500
    - Body: Internal Server error
    - Description: Possible incorrect userId or accountId

```
$ curl -X PUT
       -H "Content-Type: `application/json`"
       -d '{"userId":"1","accountName":"Account_B"}'
       http://localhost:3001/api/accounts/123'
```

### Delete an account

- URL: `DELETE /api/accounts/:accountId`
  - content-type: `application/json`
  - Description: Delete an existing account for a user.
  - Request parameters:
    - accountId (number, required): ID of the account to be deleted.
  - response: 200
  - response: 400
    - body: Bad Request
    - Description: Possible incorrect accountId.
  - response: 500
    - body: Internal Server Error
    - Description: Possible incorrect accountId or userId.

```
$ curl -X DELETE
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/accounts/1'
```

### Get all accounts for a user

- URL: `GET /api/accounts/user/:userId`
  - content-type: `application/json`
  - Description: Get all accounts for a user.
  - Request parameters:
    - userId (string, required): ID of the user to get the accounts for.
  - response: 200
    - content-type: `application/json`
    - body: object
      - an array of all accounts belonging to the user
        - id (number): The ID of the account.
        - userUserIdid (string): The ID of the user the account belongs to.
        - accountName (string): The new name for the account.
        - updatedAt: (date) the date and time of creation.
        - createdAt: (date) the date and time of update.
        - plaidAccountId (string) accountId related to Plaid. If null then not linked to Plaid
  - response: 400
    - body: Bad Request
    - Description: Possible incorrect userId.
  - response: 500
    - body: Internal Server Error
    - Description: Possible incorrect userId.

```
$ curl -X GET
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/accounts/user/1'
```

## Reports API

### Generate Reports based on userId

- URL: `GET /api/reports?userId=${}&startDate=${}&endDate=${}`
  - content-type: `application/json`
  - Description: Generate Reports based on userId .
  - Query parameters:
    - userId (string, required): ID of the user to get the accounts for.
    - startDate (date, required): min startDate of the transactions. in XXXX-MM-DD format
    - endDate (date, required): max endDate of the transactions. in XXXX-MM-DD format
  - response: 200
    - content-type: `application/json`
    - body: object
      - transactions: (array) an array of all transactions belonging to the user across all his accounts in the specified time limits.
        - id (number): The Id of the Transaction
        - transactionDate (string): Date of the transaction in YYYY-MM-DD format.
        - descriptions (string): Description of the transaction.
        - amount (number): Amount of the transaction.
        - AccountId (string): ID of the account the transaction belongs to.
        - category (string): Category of the transaction.
        - updatedAt: (date) the date and time of creation.
        - createdAt: (date) the date and time of update.
        - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
      - income: Total amount of income in this period of time.
      - expense: Total amount of expense in this period of time.
      - totalCount: total number of transactions.
  - response: 400
    - body: Bad Request
  - response: 500
    - body: Internal Server Error

```
$ curl -X GET
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/reports?userId=1&startDate=2023-01-02&endDate=2023-03-17'
```

### Generate Reports based on accountId

- URL: `GET /api/reports/accounts?accountId=${}&startDate=${}&endDate=${}`
  - content-type: `application/json`
  - Description: Generate Reports based on accountId .
  - Query parameters:
    - accountId (string, required): ID of the account to get the transactions for.
    - startDate (date, required): min startDate of the transactions. in XXXX-MM-DD format
    - endDate (date, required): max endDate of the transactions. in XXXX-MM-DD format
  - response: 200
    - content-type: `application/json`
    - body: object
      - transactions: (array) an array of all transactions belonging to the account in the specified time limits.
        - id (number): The Id of the Transaction
        - transactionDate (string): Date of the transaction in YYYY-MM-DD format.
        - descriptions (string): Description of the transaction.
        - amount (number): Amount of the transaction.
        - AccountId (string): ID of the account the transaction belongs to.
        - category (string): Category of the transaction.
        - updatedAt: (date) the date and time of creation.
        - createdAt: (date) the date and time of update.
        - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
      - income: Total amount of income in this period of time.
      - expense: Total amount of expense in this period of time.
      - totalCount: total number of transactions.
  - response: 400
    - body: Bad Request
  - response: 500
    - body: Internal Server Error

```
$ curl -X GET
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/reports/accounts?accountId=1&startDate=2023-01-02&endDate=2023-03-17'
```

### Generate Reports based on Category

- URL: `GET /api/reports/categories?userId=${}&startDate=${}&endDate=${}`
  - Content-Type: `application/json`
  - Description: Generate Reports based on Category for a user within a specified time range.
  - Query parameters:
    - userId (string, required): ID of the user to generate the report for.
    - startDate (date, required): min startDate of the transactions in the report. in XXXX-MM-DD format
    - endDate (date, required): max endDate of the transactions in the report. in XXXX-MM-DD format
  - Response: 200
    - Content-Type: `application/json`
    - Body: object
      - expense
      - income
        - {category_name} (object): an object containing the total amount, count, and transactions of the transactions belonging to the specified category within the specified time range. The category_name is the name of the category, and there is one such object for each category.
          - amount (float): total amount spent in the category within the specified time range.
          - count (integer): total number of transactions in the category within the specified time range.
          - transactions (array): an array of all transactions belonging to the category within the specified time range.
            - id (number): The Id of the Transaction
            - transactionDate (string): Date of the transaction in YYYY-MM-DD format.
            - descriptions (string): Description of the transaction.
            - amount (number): Amount of the transaction.
            - AccountId (string): ID of the account the transaction belongs to.
            - category (string): Category of the transaction.
            - updatedAt: (date) the date and time of creation.
            - createdAt: (date) the date and time of update.
            - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
  - Response: 400
    - Body: Bad Request.
  - Response: 500
    - Body: Internal Server Error.

```
$ curl -X GET
       -H "Content-Type: application/json"
       http://localhost:3001/api/reports/categories?userId=1&startDate=2023-01-02&endDate=2023-03-17'
```

## Transactions API

### Get Transactions with Filters

- URL: `GET /api/transactions/filters/:userId/transactions?limit=${}&offset=${}&accountId=${}&transactionName=${}&startDate=${}&endDate=${}&minAmount=${}&maxAmount=${}&categories=${}`

  - Content-Type: `application/json`
  - Description: Get transactions for a user with optional filters and pagination.
  - URL parameters:
    - userId (string, required): ID of the user to get transactions for.
  - Query parameters:
    - limit (integer, required): Number of transactions to return per page.
    - offset (integer, required): Page number of the transactions to return. Don't have to mutiple by the limit.
    - accountId (string, optional): ID of the account to filter transactions by. If no accountId then it will fetch all accounts for that user.
    - transactionName (string, optional): Name of the transaction to filter by.
    - startDate (date, optional): min date of the transactions to filter by. in XXXX-MM-DD format.
    - endDate (date, optional): max date of the transactions to filter by. in XXXX-MM-DD format.
    - minAmount (float, optional): min amount of the transactions to filter by.
    - maxAmount (float, optional): max amount of the transactions to filter by.
    - categories (string, optional): a comma-separated list of categories to filter transactions by.
  - Response: 200

    - Content-Type: `application/json`
    - Body:
      - transactions: (array) an array of all transactions belonging to the user.
        - id (number): The Id of the Transaction
        - transactionDate (string): Date of the transaction in YYYY-MM-DD format.
        - descriptions (string): Description of the transaction.
        - amount (number): Amount of the transaction.
        - AccountId (string): ID of the account the transaction belongs to.
        - category (string): Category of the transaction.
        - updatedAt: (date) the date and time of creation.
        - createdAt: (date) the date and time of update.
        - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
      - totalCount: (number) total Number of transactions regardless of the offset & limit.

  - Response: 400
    - Body: Missing required fields. Must contain [userId, limit, offset].
  - Response: 500
    - Body: Internal Server Error.

```
$ curl -X GET
       -H "Content-Type: application/json"
       http://localhost:3001/api/reports/filters/1/transactions?limit=10&offset=0&transactionName=Groceries&startDate=2023-01-01&endDate=2023-03-01&minAmount=10&maxAmount=100&categories=Food,Utilities,Transportation'
```

### Get the most recent Transactions

- URL: `GET /api/transactions?userId={userId}&page={page}&pageSize={pageSize}`
  - content-type: `application/json`
  - Description: Get the most recent transactions for one user across all his/her accounts.
  - Query parameters:
    - userId (string, required): User ID to retrieve transactions for.
    - page (number, required): Page number of transactions to retrieve. (no need to mutiply by the pageSize)
    - pageSize (number, required): Max number of transactions to retrieve per page.
  - response: 200
    - content-type: `application/json`
    - body: object
      - rows: (array) an array of all transactions belonging to the user.
        - id (number): The Id of the Transaction
        - transactionDate (string): Date of the transaction in YYYY-MM-DD format.
        - descriptions (string): Description of the transaction.
        - amount (number): Amount of the transaction.
        - AccountId (string): ID of the account the transaction belongs to.
        - category (string): Category of the transaction.
        - updatedAt: (date) the date and time of creation.
        - createdAt: (date) the date and time of update.
        - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
      - totalCount: (number) total Number of transactions regardless of the page & pagesize.
  - response: 400
    - body: Bad Request
    - Description: Possible Missing Required Fields.
  - response: 500
    - body: Internal Server Error
    - Description: Internal Server Error.

```
$ curl -X GET
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/transactions?userId=1&page=0&pageSize=10'
```

### Create A new Transaction

- URL: `POST /api/transactions`
  - content-type: `application/json`
  - Description: Create A new Transaction
  - Request parameters:
    - transactionDate (string, required): Date of the transaction in YYYY-MM-DD format.
    - descriptions (string, required): Description of the transaction.
    - amount (number, required): Amount of the transaction.
    - accountId (string, required): ID of the account the transaction belongs to.
    - category (string, required): Category of the transaction.
  - response: 201
    - content-type: `application/json`
    - body: object
      - id (number): The Id of the created Transaction
      - transactionDate (string): Date of the new transaction in YYYY-MM-DD format.
      - descriptions (string): Description of the new transaction.
      - amount (number): Amount of the new transaction.
      - AccountId (string): ID of the account the new transaction belongs to.
      - category (string): Category of the new transaction.
      - updatedAt: (date) the date and time of creation.
      - createdAt: (date) the date and time of update.
      - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
  - response: 400
    - body: Bad Request
    - Description: Possible Missing Required Fields.
  - response: 500
    - body: Internal Server Error
    - Description: Internal Server Error.

```
$ curl -X POST
       -H "Content-Type: `application/json`"
       -d '{"transactionDate": "2023-03-16", "descriptions": "Test Test", "amount": 10000,"accountId": "1", "category": "Income"}'
       http://localhost:3001/api/transactions'
```

### Update A Transaction

- URL: `PUT /api/transactions/:transactionId`
  - content-type: `application/json`
  - Description: Update A new Transaction
  - Path parameters:
    - transactionId: (string, required): Id of the transaction you want to update
  - Request parameters:
    - transactionDate (string, required): Date of the transaction in YYYY-MM-DD format.
    - descriptions (string, required): Description of the transaction.
    - amount (number, required): Amount of the transaction.
    - accountId (string, required): ID of the account the transaction belongs to.
    - category (string, required): Category of the transaction.
  - response: 200
    - content-type: `application/json`
    - body: object
      - transactionid (number): The Id of the updated Transaction
      - transactionDate (string): Date of the updated transaction in YYYY-MM-DD format.
      - descriptions (string): Description of the updated transaction.
      - amount (number): Amount of the updated transaction.
      - AccountId (string): ID of the account the updated transaction belongs to.
      - category (string): Category of the updated transaction.
      - updatedAt: (date) the date and time of creation.
      - createdAt: (date) the date and time of update.
      - plaidTransactionId: (string) transactionId of the plaid account. Null if not a plaid account.
  - response: 400
    - body: Bad Request
    - Description: Possible Missing Required Fields.
  - response: 500
    - body: Internal Server Error
    - Description: Internal Server Error.

```
$ curl -X PUT
       -H "Content-Type: `application/json`"
       -d '{"transactionDate": "2023-03-16", "descriptions": "Test Test", "amount": 10000,"accountId": "1", "category": "Income"}'
       http://localhost:3001/api/transactions/1'
```

### Delete A Transaction

- URL: `DELETE /api/transactions/:transactionId`
  - content-type: `application/json`
  - Description: Delete A new Transaction
  - Path parameters:
    - transactionId: (string, required): Id of the transaction you want to delete
  - response: 200
  - response: 400
    - body: Bad Request
    - Description: Possible Missing Required Fields.
  - response: 500
    - body: Internal Server Error
    - Description: Internal Server Error.

```
$ curl -X DELETE
       -H "Content-Type: `application/json`"
       http://localhost:3001/api/transactions/1'
```
